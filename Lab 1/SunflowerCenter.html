<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Sunflower Centers in South Korea</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href= 'btn.css' rel= 'stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
    .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    }
</style>

<style>
    #desc {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        left: 10px;
        border-radius: 3px;
        width: 490px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Open Sans', sans-serif;
    }
    #menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        right: 10px;
        border-radius: 3px;
        width: 90px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Open Sans', sans-serif;
    }
    #menu a {
        font-size: 12px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 10px;
        padding: 10px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.25);
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: #f9f1ef; <--! hover when selected -->
        color: #404040; <--! hover when selected text -->
    }

    #menu a.active {
        background-color: #e3dfdf; <--! on load, unselected, unhovered -->
        color: #ffffff; <--! on load, unselected, unhovered text -->
    }

    #menu a.active:hover {
        background: #c0c0c0; <--! selected hover colour -->
    }
</style>

<nav id="menu"></nav>
<div id= "desc">
  <div style= "margin: 10px 10px 10px 10px;">
  <h4> South Korea's Sunflower Centers 🌻</h4>
  <p>
    <a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
      Emergency Center
    </a>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample2">
      Children's Center
    </button>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample3" aria-expanded="false" aria-controls="collapseExample2">
      Integrated Center
    </button>
    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample4" aria-expanded="false" aria-controls="collapseExample2">
      해바라기센터 유형
    </button>
  </p>
  <div class="collapse" id="collapseExample">
    <div class="card card-body">

       The Emergency Sunflower Center (위기지원형) operates 24 hours a day, 365 days a year.
       They offer support for sexual assault, domestic violence, prostitution and sex trafficking victims as well as their families.
       Services are open to people of all ages and genders. Counseling services, medical treatment, legal support, and support with police investigations are offered.<p>

    </div>
  </div>
  <div class="collapse" id="collapseExample2">
    <div class="card card-body">

 The Children's Sunflower Center (아동형) operates Monday to Friday, from 9am to 6pm.
These centers are specifically catered to victims under the age of 18; Children, teenagers, as well as disabled persons of all ages are welcome at this center.
The Children's Sunflower Center is open to people of all genders. They offer regular counseling, medical treatment, legal support, psychological evaluations and treatment, as well as investigation support. <p>

    </div>
  </div>
  <div class="collapse" id="collapseExample3">
    <div class="card card-body">

    The Integrated Sunflower Center (통합형) operates 24 hours a day, 365 days a year. These centers are typically located within other buildings or facilities.
    They offer support for sexual assault, domestic violence, prostitution and sex trafficking victims as well as their families.
    Services are open to people of all ages and genders. They offer crisis and regular counseling, medical care, legal support, investigation support, and psychological evaluation and treatment.<p>

    </div>
  </div>
  <div class="collapse" id="collapseExample4">
    <div class="card card-body">

      <strong>위기지원형</strong>
      <i>대상:</i> 성폭력·가정폭력·성매매 피해자 및 그 가족 (모든 연령 및 성별 포함)
      <i>이용시간:</i> 365일 24시간
      <i>지원내용:</i> 위기상황 상담, 의료, 법률, 수사지원 서비스 <br>
      <p>

      <p><strong>아동형</strong> <br>
      <i>대상:</i> 성폭력 피해 19세미만 아동·청소년 및 모든 연령 지적장애인 (모든 성별 포함) <br>
      <i>이용시간:</i> 월~금 9:00-18:00 <br>
      <i>지원내용:</i> 일반상담, 의료, 법률, 심리평가 및 치료, 출장 수사지원 서비스<br>
      <p>

      <strong>통합형</strong> <br>
      <i>대상: 성폭력·가정폭력·성매매 피해자 및 그 가족 (모든 연령 및 성별 포함)</i> <br>
      <i>이용시간:</i> 365일 24시간 <br>
      <i>지원내용: </i>위기상황 상담 및 일반 상담, 의료, 법률, 수사지원 서비스, 심리평가 및 치료 <p>

      <a href="http://www.mogef.go.kr/cs/wvs/cs_wvs_f005.do">출처:</a> 이 링크를 통해 서비스 내용 및 다른 정보를 보실 수 있습니다.

    </div>
  </div>
    </div>
  </div>
<div id="map"></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoidGhkdGxkdXMiLCJhIjoiY2pwMzc1NTgyMGV5ODNxbG5vaW83YTZqNiJ9.G8IPBfnoXrqn_nskHT6sjQ';
var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v9',
    zoom: 11,
    center: [126.983116, 37.580238]
});


map.on('load', function () {

    map.addLayer({
        "id": "Emergency Centers",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                  {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [127.01404800032644, 37.559298001175875]
                    },
                    "properties": {
                        "description": "정표구화랑 - Jeongpyogu Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.987880999936394, 37.561465001345525]
                    },
                    "properties": {
                        "description": "세종갤러리 - Sejong Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.974940999882023, 37.561597001197988]
                    },
                    "properties": {
                        "description": "로댕갤러리 - Rodaeng Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.981845000545817, 37.564153000706725]
                    },
                    "properties": {
                        "description": "롯데화랑 - Lotte Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.967737000441645, 37.566004000599278]
                    },
                    "properties": {
                        "description": "반도화랑 - Bando Gallery",
                        "icon": "art-gallery"
                    }
                },
                ]
            }
        },
        "layout": {
           "icon-image": "{icon}-15",
           "icon-allow-overlap": true
       }
    });
});

map.on('load', function () {

    map.addLayer({
        "id": "Childrens Centers",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.99757299989551, 37.566396000599703]
                    },
                    "properties": {
                        "description": "거부화랑 - Geobu Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [127.003789000338756, 37.570585000825751]
                    },
                    "properties": {
                        "description": "백송화랑 - Baeksong Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.95951819945337, 37.572452900469834]
                    },
                    "properties": {
                        "description": "<strong>독립문 - Dongnimmun Gate</strong><p>Korea's Arc de Triomphe, where the King would greet envoys</p>",
                        "icon": "monument"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.981741999459715, 37.572578000931749]
                    },
                    "properties": {
                        "description": "서울림화랑 - Seoul Rim Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.983178000165481, 37.572725001050884]
                    },
                    "properties": {
                        "description": "청송화랑 - Cheongsong Gallery",
                        "icon": "art-gallery"
                    }
                },
                ]
            }
        },
        "layout": {
           "icon-image": "{icon}-15",
           "icon-allow-overlap": true
       }
    });
});

map.on('load', function () {

    map.addLayer({
        "id": "Integrated Centers",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.985189199484594, 37.575892400488414]
                    },
                    "properties": {
                        "description": "종로갤러리 - Jongro Gallery",
                        "icon": "museum"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.984685399656996, 37.576531600723918]
                    },
                    "properties": {
                        "description": "사비나 미술관 - Sabina Art Museum",
                        "icon": "museum"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.961816000063067, 37.604412000792053]
                    },
                    "properties": {
                        "description": "베스트화랑 - Best Gallery",
                        "icon": "art-gallery"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.976695, 37.579760]
                    },
                    "properties": {
                        "description": "<strong>경복궁 - Gyeongbokgung Palace</strong><p>Main royal palace of the Joseon Dynasty</p>",
                        "icon": "castle"
                    }
                },
                {
                    "type": "Feature",
                    "geometry": {
                        "type": "Point",
                        "coordinates": [126.9837, 37.5824]
                    },
                    "properties": {
                        "description": "<strong>북촌한옥마을 - Bukchon Hanok Village</strong><p>A traditional village placed atop a hill between Gyeongbokgung Palace, Changdeok Palace, and Jongmyo Royal Shrine. The village is preserved to show 600 years of history.</p>",
                        "icon": "attraction"
                    }
                }
                ]
            }
        },
        "layout": {
           "icon-image": "{icon}-15",
           "icon-allow-overlap": true
       }
    });
});



// When a click event occurs on a feature in the places layer, open a popup at the
 // location of the feature, with description HTML from its properties.
 map.on('click', 'Emergency Centers', function (e) {
     var coordinates = e.features[0].geometry.coordinates.slice();
     var description = e.features[0].properties.description;

     // Ensure that if the map is zoomed out such that multiple
     // copies of the feature are visible, the popup appears
     // over the copy being pointed to.
     while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
         coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
     }

     new mapboxgl.Popup()
         .setLngLat(coordinates)
         .setHTML(description)
         .addTo(map);
 });

 // Change the cursor to a pointer when the mouse is over the places layer.
 map.on('mouseenter', 'Emergency Centers', function () {
     map.getCanvas().style.cursor = 'pointer';
 });

 // Change it back to a pointer when it leaves.
 map.on('mouseleave', 'Emergency Centers', function () {
     map.getCanvas().style.cursor = '';
 });

 // When a click event occurs on a feature in the places layer, open a popup at the
  // location of the feature, with description HTML from its properties.
  map.on('click', 'Childrens Centers', function (e) {
      var coordinates = e.features[0].geometry.coordinates.slice();
      var description = e.features[0].properties.description;

      // Ensure that if the map is zoomed out such that multiple
      // copies of the feature are visible, the popup appears
      // over the copy being pointed to.
      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
          coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
      }

      new mapboxgl.Popup()
          .setLngLat(coordinates)
          .setHTML(description)
          .addTo(map);
  });

  // Change the cursor to a pointer when the mouse is over the places layer.
  map.on('mouseenter', 'Childrens Centers', function () {
      map.getCanvas().style.cursor = 'pointer';
  });

  // Change it back to a pointer when it leaves.
  map.on('mouseleave', 'Childrens Centers', function () {
      map.getCanvas().style.cursor = '';
  });

  // When a click event occurs on a feature in the places layer, open a popup at the
   // location of the feature, with description HTML from its properties.
   map.on('click', 'Integrated Centers', function (e) {
       var coordinates = e.features[0].geometry.coordinates.slice();
       var description = e.features[0].properties.description;

       // Ensure that if the map is zoomed out such that multiple
       // copies of the feature are visible, the popup appears
       // over the copy being pointed to.
       while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
           coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
       }

       new mapboxgl.Popup()
           .setLngLat(coordinates)
           .setHTML(description)
           .addTo(map);
   });

   // Change the cursor to a pointer when the mouse is over the places layer.
   map.on('mouseenter', 'Integrated Centers', function () {
       map.getCanvas().style.cursor = 'pointer';
   });

   // Change it back to a pointer when it leaves.
   map.on('mouseleave', 'Integrated Centers', function () {
       map.getCanvas().style.cursor = '';
   });


 var toggleableLayerIds = [ 'Emergency Centers', 'Childrens Centers', 'Integrated Centers'];

 for (var i = 0; i < toggleableLayerIds.length; i++) {
     var id = toggleableLayerIds[i];

     var link = document.createElement('a');
     link.href = '#';
     link.className = 'active';
     link.textContent = id;

     link.onclick = function (e) {
         var clickedLayer = this.textContent;
         e.preventDefault();
         e.stopPropagation();

         var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

         if (visibility === 'visible') {
             map.setLayoutProperty(clickedLayer, 'visibility', 'none');
             this.className = '';
         } else {
             this.className = 'active';
             map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
         }
     };

     var layers = document.getElementById('menu');
     layers.appendChild(link);
 }

</script>

</body>
</html>
